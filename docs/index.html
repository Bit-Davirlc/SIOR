<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SIOR - TCC</title>

	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@5/dark.css">

	<script src="https://unpkg.com/konva@9.3.6/konva.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/imask/7.6.0/imask.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

</head>

<body>
	<header>
		<nav class="navbar">
			<ul class="nav-links">
				<li><a href="#" id="navOrcamentos">Or√ßamentos</a></li>
				<li><a href="#" id="navClientes">Clientes</a></li>
				<li><a href="#" id="navCategorias">Categorias</a></li>
				<li><a href="#" id="navProdutos">Produtos</a></li>
				<li><a href="#" id="navDesenho">Desenho</a></li>
			</ul>
			<button id="toggleTema" class="btn-toggle-tema" title="Alternar tema">üåô</button>
		</nav>
	</header>

	<main>
		<!-- CLIENTES -->
		<section id="secaoClientes">
			<h1>Gest√£o de Clientes</h1>
			<form id="formCliente">
				<input type="hidden" id="clienteId">
				<div class="grid-2">
					<div>
						<label for="nome">Nome:</label>
						<input type="text" id="nome" placeholder="Nome completo" required>
					</div>
					<div>
						<label for="documento">Documento:</label>
						<input type="text" id="documento" placeholder="CPF/CNPJ">
					</div>
					<div>
						<label for="email">Email:</label>
						<input type="email" id="email" placeholder="email@exemplo.com">
					</div>
					<div>
						<label for="telefone">Telefone:</label>
						<input type="tel" id="telefone" placeholder="(99) 99999-9999">
					</div>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn-principal">Salvar Cliente</button>
				</div>
			</form>

			<h2>Clientes Cadastrados</h2>
			<table id="tabelaClientes">
				<thead>
					<tr>
						<th>Nome</th><th>Documento</th><th>Email</th><th>Telefone</th><th>A√ß√µes</th>
					</tr>
				</thead>
				<tbody id="corpoTabelaClientes"></tbody>
			</table>
		</section>

		<!-- CATEGORIAS -->
		<section id="secaoCategorias" class="hidden">
			<h1>Gest√£o de Categorias</h1>
			<form id="formCategoria">
				<input type="hidden" id="categoriaId">
				<div>
					<label for="categoriaNome">Nome da Categoria:</label>
					<input type="text" id="categoriaNome" placeholder="Ex: Cabeamento, Ativos de Rede" required>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn-principal">Salvar Categoria</button>
				</div>
			</form>

			<h2>Categorias Cadastradas</h2>
			<table id="tabelaCategorias">
				<thead>
					<tr><th>ID</th><th>Nome</th><th>A√ß√µes</th></tr>
				</thead>
				<tbody id="corpoTabelaCategorias"></tbody>
			</table>
		</section>

		<!-- PRODUTOS -->
		<section id="secaoProdutos" class="hidden">
			<h1>Gest√£o de Produtos</h1>
			<form id="formProduto">
				<input type="hidden" id="produtoId">
				<div class="grid-2">
					<div>
						<label for="produtoNome">Nome:</label>
						<input type="text" id="produtoNome" required>
					</div>
					<div>
						<label for="produtoDescricao">Descri√ß√£o:</label>
						<input type="text" id="produtoDescricao">
					</div>
					<div>
						<label for="produtoPreco">Pre√ßo (R$):</label>
						<input type="number" id="produtoPreco" step="0.01" required>
					</div>
					<div>
						<label for="produtoUnidade">Unidade:</label>
						<input type="text" id="produtoUnidade" placeholder="Ex: un, m, h" required>
					</div>
					<div>
						<label for="produtoCategoria">Categoria:</label>
						<select id="produtoCategoria" required>
							<option value="">Selecione...</option>
						</select>
					</div>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn-principal">Salvar Produto</button>
				</div>
			</form>

			<h2>Produtos Cadastrados</h2>
			<table id="tabelaProdutos">
				<thead>
					<tr><th>Nome</th><th>Pre√ßo</th><th>Unidade</th><th>Categoria</th><th>A√ß√µes</th></tr>
				</thead>
				<tbody id="corpoTabelaProdutos"></tbody>
			</table>
		</section>

		<!-- OR√áAMENTOS -->
		<section id="secaoOrcamentos" class="hidden">
			<h1>Gest√£o de Or√ßamentos</h1>
			<button id="btnNovoOrcamento" class="btn-principal" style="margin-bottom: 10px;">+ Criar Novo Or√ßamento</button>

			<h2>Or√ßamentos Criados</h2>
			<table id="tabelaOrcamentos">
				<thead>
					<tr><th>ID</th><th>Cliente</th><th>Data</th><th>Status</th><th>Valor Total</th><th>A√ß√µes</th></tr>
				</thead>
				<tbody id="corpoTabelaOrcamentos"></tbody>
			</table>
		</section>

		<!-- NOVO OR√áAMENTO -->
		<section id="secaoNovoOrcamento" class="hidden">
			<h1 id="tituloFormOrcamento">Novo Or√ßamento</h1>
			<form id="formNovoOrcamento">
				<input type="hidden" id="orcamentoIdEdit">
				<fieldset>
					<legend>Detalhes</legend>
					<div>
						<label for="orcamentoCliente">Cliente:</label>
						<select id="orcamentoCliente" required>
							<option value="">Selecione um cliente...</option>
						</select>
					</div>

					<div id="campoStatus" class="hidden" style="margin-top: 10px;">
						<label for="orcamentoStatus">Status:</label>
						<select id="orcamentoStatus">
							<option value="Em Aberto">Em Aberto</option>
							<option value="Aprovado">Aprovado</option>
							<option value="Rejeitado">Rejeitado</option>
							<option value="Finalizado">Finalizado</option>
						</select>
					</div>
				</fieldset>

				<fieldset>
					<legend>Adicionar Itens</legend>
					<div class="form-item-container">
						<div>
							<label for="orcamentoProduto">Produto:</label>
							<select id="orcamentoProduto">
								<option value="">Selecione um produto...</option>
							</select>
						</div>
						<div>
							<label for="orcamentoQuantidade">Qtd:</label>
							<input type="number" id="orcamentoQuantidade" value="1" min="1">
						</div>
						<button type="button" id="btnAdicionarItem" class="btn-secundario">Adicionar</button>
					</div>
				</fieldset>

				<h3>Itens do Or√ßamento</h3>
					<table id="tabelaItensTemporarios">
						<thead>
							<tr><th>Produto</th><th>Qtd</th><th>Pre√ßo Unit.</th><th>Subtotal</th><th>A√ß√£o</th></tr>
						</thead>
						<tbody id="corpoTabelaItensTemp"></tbody>
					</table>

				<h3 class="total-temp" id="orcamentoTotalTemp">Total: R$ 0.00</h3>

				<div class="form-actions">
					<button type="submit" class="btn-principal" id="btnSalvarOrcamento">Salvar Or√ßamento</button>
					<button type="button" id="btnCancelarNovoOrcamento" class="btn-perigo">Cancelar</button>
				</div>
			</form>
		</section>

		<section id="secaoDesenho" class="hidden">
			<h1>M√≥dulo de Desenho T√©cnico</h1>

			<div class="toolbar-desenho">
				<label for="inputPlantaBaixa" class="btn-transferencia">
					Importar Planta Baixa
				</label>
				<input type="file" id="inputPlantaBaixa" accept="image/*" class="hidden">

				<button id="btnExportarPNG" class="btn-transferencia" style="margin-left: auto;">
					Exportar como PNG
				</button>

				<button type="button" id="btnLimparCanvas" class="btn-perigo" title="Limpar tudo" style="
				background-color: #ff0000;
				color: var(--primary-text, #fff);
				padding: 10px 18px;
				border: none;
				border-radius: 8px;
				font-size: 0.95rem;
				font-weight: 500;
				cursor: pointer;
				transition: background-color .15s ease, transform .15s ease, box-shadow .15s ease;
				display: inline-flex;
				align-items: center;
				gap: 8px;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
				">
					Limpar
				</button> 
				</div>

				<div class="toolbox">

					<span class="toolbox-title">Ferramentas:</span>

					<div class="tools-control" style="margin-bottom: 15px;">
						<div style="margin-bottom: 10px;">
							<label for="corLinha" style="font-size: 12px; display:block; margin-bottom:5px;">Cor do Cabo:</label>
							<input type="color" id="corLinha" value="#000000" style="width: 100%; height: 35px; cursor: pointer; border: 1px solid #ccc; border-radius: 4px;">
						</div>

						<div style="display: flex; gap: 5px;">
							<button id="btnModoCursor" class="btn-tool active" title="Modo Sele√ß√£o (Mover e Editar)">
								üëÜ Cursor
							</button>
							<button id="btnModoLinha" class="btn-tool" title="Modo Desenhar Cabo">
								‚úèÔ∏è Cabo
							</button>
						</div>
					</div>

					<hr style="border: 0; border-top: 1px solid #ddd; margin: 10px 0;">

					<span class="toolbox-title">Arraste para o canvas:</span>

					<div class="icons-grid" style="display: flex; flex-wrap: wrap; gap: 10px;">
						<img src="https://img.icons8.com/ios-filled/50/workstation.png" 
							id="tool-pc" class="tool-item" title="PC / Workstation" draggable="true">

						<img src="https://img.icons8.com/ios-filled/50/router.png" 
							id="tool-switch" class="tool-item" title="Switch / Roteador" draggable="true">

						<img src="https://img.icons8.com/ios-filled/50/ethernet-on.png" 
							id="tool-rede-parede" class="tool-item" title="Ponto de Rede (Parede)" draggable="true">

						<img src="https://img.icons8.com/ios-filled/50/ceiling-light.png" 
							id="tool-rede-teto" class="tool-item" title="Ponto de Rede (Teto)" draggable="true">

						<img src="https://img.icons8.com/ios-filled/50/wifi-router.png" 
							id="tool-wifi" class="tool-item" title="Wi-Fi" draggable="true">

						<img src="https://img.icons8.com/ios-filled/50/bullet-camera.png" 
							id="tool-camera" class="tool-item" title="C√¢mera" draggable="true">
					</div>
				</div>

			<div id="container-canvas"></div>
		</section>

	</main>

	<!-- MODAL DETALHES -->
	<div id="modalDetalhes" class="modal-container hidden">

		<div class="modal-content" id="modalContentPDF">

			<span id="modalClose" class="modal-close-btn">&times;</span>

			<button type="button" id="btnBaixarPDF" class="btn-secundario btn-imprimir">
				Baixar PDF
			</button>
			<button type="button" id="btnExportarXLSX" class="btn-secundario btn-imprimir">
				Exportar XLSX
			</button>

			<h2>Detalhes do Or√ßamento <span id="modalOrcamentoId"></span></h2>
			<p><strong>Cliente:</strong> <span id="modalClienteNome"></span></p>
			<p><strong>Data:</strong> <span id="modalData"></span></p>
			<p><strong>Status:</strong> <span id="modalStatus"></span></p>

			<h3>Itens</h3>
			<table id="modalTabelaItens">
				<thead><tr><th>Produto</th><th>Qtd</th><th>Pre√ßo Unit.</th><th>Subtotal</th></tr></thead>
				<tbody id="modalCorpoTabela"></tbody>
			</table>

			<h3 class="total-temp" id="modalValorTotal">Total: R$ 0.00</h3>
		</div>
	</div>

	<footer class="footer">
		<div class="footer-content">
			<p><strong>SIOR - Sistema de Or√ßamenta√ß√£o e Rede</strong></p>
			<p>Trabalho de Conclus√£o de Curso ‚Ä¢ Desenvolvido por Davi Robson</p>
			<p>Vers√£o 1.0 ‚Ä¢ ¬© 2025</p>
		</div>
	</footer>

	<script type="module" src="js/main.js"></script>
</body>

</html>
